function setDoom(){$(".ui-form-list-btn").parent().hide(),$("#basketArea").find(".ui-scroll").attr("style","height:"+50*window.innerHeight/100+"px;max"),$("#scrollbarProject").attr("style","margin-bottom:0;overflow-y:hidden"),document.body.addEventListener("click",hideP),0==generalParamsSatis.workingParams.SHOW_HYDROLIC&&$("#hydBtn").hide(),0==generalParamsSatis.workingParams.SHOW_PUMP&&$("#pumpBtn").hide(),0==generalParamsSatis.workingParams.SHOW_TUBE&&$("#hoseBtn").hide(),0==generalParamsSatis.workingParams.SHOW_VIRTUAL_PRODUCT&&$("#vpBtn").hide(),FiyatTalepKontrol(0)}function hideP(){$(".pbsContex").remove()}function AddRow(t,e,r,n,a,i,o,d,u,l,c=0,s="",_="TL",m,p="-6",A=0,v=0,b="Adet",E="",h="",y=0,w="",f="",C=0,g="",I="",T="",P=0){console.log(arguments);var S=$(document),O=S.find("input[name=_rd_money]:checked").val();document.getElementById("_hidden_rd_money_"+O).value;if("M"==b&&0==y){var x="&pid_="+t+"&sid_="+e+"&tax="+u+"&cost="+v+"&manuel="+A+"&product_name="+d+"&stock_code="+r+"&brand="+n+"&indirim1="+l+"&amount="+i+"&unit="+b+"&price="+o+"&other_money="+_+"&price_other="+m;return x+="&is_virtual="+a,x+="&product_type="+c,x+="&shelf_code="+s,x+="&rowNum="+row_count,openBoxDraggable("index.cfm?fuseaction=objects.emptypopup_extra_calculate_pbs"+x),!0}var B="SELECT PP.SHELF_CODE  FROM PRODUCT_PLACE_ROWS AS PPR";B+=" LEFT JOIN PRODUCT_PLACE AS PP ON PP.PRODUCT_PLACE_ID=PPR.PRODUCT_PLACE_ID",B+=" WHERE STOCK_ID="+e;var D=wrk_query(B,"dsn3"),R="";if(0==s.length){if(D.recordcount>0){if(D.recordcount>1&&0==y){x="&pid_="+t+"&sid_="+e+"&tax="+u+"&cost="+v+"&manuel="+A+"&product_name="+d+"&stock_code="+r+"&brand="+n+"&indirim1="+l+"&amount="+i+"&unit="+b+"&price="+o+"&other_money="+_+"&price_other="+m;return x+="&is_virtual="+a,x+="&product_type="+c,x+="&shelf_code="+s,x+="&rowNum="+row_count,openBoxDraggable("index.cfm?fuseaction=objects.emptypopup_select_raf_pbs"+x),!0}R=D.SHELF_CODE[0]}}else R=s;row_count++,rowCount=row_count;var k=moneyArr.find(t=>t.MONEY==_),N=m*k.RATE2;if(0==o){B="SELECT ISNULL(workcube_metosan_1.GET_CURRENT_PRODUCT_PRICE("+CompanyData.COMPANY_ID+","+CompanyData.PRICE_CAT+","+e+"),0) AS FIYAT",D=wrk_query(B,"dsn3");N=D.FIYAT[0],o=D.FIYAT[0],m=D.FIYAT[0],_="TL"}var L=document.createElement("tr");1==A&&L.setAttribute("style","background-color:#86b5ff75 !important;"),L.setAttribute("id","row_"+row_count),L.setAttribute("data-selected","0"),L.setAttribute("data-rc",row_count),L.setAttribute("data-ProductType",c),L.setAttribute("class","sepetRow");var M=document.createElement("td"),F=document.createElement("span");F.innerText=row_count,F.setAttribute("id","spn_"+row_count),M.appendChild(F);var H=document.createElement("span");1!=row_count?(H.setAttribute("class","fa fa-arrow-up"),H.setAttribute("onclick","moveRow("+row_count+","+(row_count-1)+")")):H.setAttribute("class",""),M.appendChild(H),L.appendChild(M);M=document.createElement("td");var U=document.createElement("input");U.setAttribute("type","checkbox"),U.setAttribute("data-row",row_count),U.setAttribute("onclick","selectrw(this)"),M.appendChild(U),L.appendChild(M);M=document.createElement("td");var Y=document.createElement("input");Y.setAttribute("name","product_id_"+row_count),Y.setAttribute("id","product_id_"+row_count),Y.setAttribute("type","hidden"),Y.setAttribute("value",t);var q=document.createElement("input");q.setAttribute("name","stock_id_"+row_count),q.setAttribute("id","stock_id_"+row_count),q.setAttribute("type","hidden"),q.setAttribute("value",e);var K=document.createElement("input");K.setAttribute("name","is_virtual_"+row_count),K.setAttribute("id","is_virtual_"+row_count),K.setAttribute("type","hidden"),K.setAttribute("value",a);var G=document.createElement("input");G.setAttribute("name","shelf_code_"+row_count),G.setAttribute("id","shelf_code_"+row_count),G.setAttribute("type","hidden"),G.setAttribute("value",R);var W=document.createElement("input");W.setAttribute("name","cost_"+row_count),W.setAttribute("id","cost_"+row_count),W.setAttribute("type","hidden"),W.setAttribute("value",v);var j=document.createElement("input");j.setAttribute("name","is_production_"+row_count),j.setAttribute("id","is_production_"+row_count),j.setAttribute("type","hidden"),j.setAttribute("value",C);var X=document.createElement("input");if(X.setAttribute("name","row_uniq_id_"+row_count),X.setAttribute("id","row_uniq_id_"+row_count),X.setAttribute("type","hidden"),g.length>0)X.setAttribute("value",g);else{var V=GenerateUniqueId();X.setAttribute("value",V)}var J=document.createElement("input");J.setAttribute("name","is_manuel_"+row_count),J.setAttribute("id","is_manuel_"+row_count),J.setAttribute("type","hidden"),J.setAttribute("value",A),M.appendChild(Y),M.appendChild(q),M.appendChild(K),M.appendChild(G),M.appendChild(W),M.appendChild(j),M.appendChild(X),M.appendChild(J);G=document.createElement("input");G.setAttribute("name","stock_code_"+row_count),G.setAttribute("id","stock_code_"+row_count),G.setAttribute("type","text"),G.setAttribute("readonly",""),G.setAttribute("style","width:40px"),G.setAttribute("class","stockkodu"),G.setAttribute("value",r);var z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:15%");G=document.createElement("input");G.setAttribute("name","product_name_"+row_count),G.setAttribute("id","product_name_"+row_count),G.setAttribute("class","urunadi"),G.setAttribute("type","text"),G.setAttribute("style","width:40px"),G.setAttribute("value",d);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");G=document.createElement("input");G.setAttribute("name","brand_name_"+row_count),G.setAttribute("id","brand_name_"+row_count),G.setAttribute("type","text"),G.setAttribute("disabled",""),G.setAttribute("value",n);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);var Q=getRafSml(e,R);M=document.createElement("td");M.setAttribute("style","width:5%");G=document.createElement("input");G.setAttribute("name","department_name"+row_count),G.setAttribute("id","department_name"+row_count),G.setAttribute("type","text"),G.setAttribute("disabled",""),G.setAttribute("value",Q);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","display:flex;align-items: baseline;");z=document.createElement("div");z.setAttribute("class","form-group");var Z=AsamaYapici(row_count,p),tt=document.createElement("span");tt.setAttribute("class","icon-detail"),tt.setAttribute("onclick","openBoxDraggable('index.cfm?fuseaction=objects.popup_detail_product&pid="+t+"&sid="+e+"')"),z.appendChild(Z),M.appendChild(z),1!=a&&M.appendChild(tt),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:3%");W=document.createElement("input");W.setAttribute("name","amount_"+row_count),W.setAttribute("id","amount_"+row_count),W.setAttribute("type","text"),W.setAttribute("class","prtMoneyBox"),W.setAttribute("value",commaSplit(i,2)),W.setAttribute("onchange","hesapla('price',"+row_count+")"),W.setAttribute("onClick","sellinputAllVal(this)");z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(W),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:3%");W=document.createElement("input");W.setAttribute("name","main_unit_"+row_count),W.setAttribute("id","main_unit_"+row_count),W.setAttribute("type","text"),W.setAttribute("style","width:20px"),W.setAttribute("readonly",""),W.setAttribute("value",b);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(W),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:3%");var et=document.createElement("select");et.setAttribute("name","other_money_"+row_count),et.setAttribute("id","other_money_"+row_count),et.setAttribute("onchange","hesapla('other_money',"+row_count+")");for(let t=0;t<moneyArr.length;t++){const e=moneyArr[t];var rt=document.createElement("option");rt.setAttribute("value",e.MONEY),rt.innerText=e.MONEY,et.appendChild(rt)}et.value=_;z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(et),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");var nt=document.createElement("input");nt.setAttribute("name","price_other_"+row_count),nt.setAttribute("id","price_other_"+row_count),nt.setAttribute("type","text"),nt.setAttribute("onchange","hesapla('price_other',"+row_count+")"),nt.setAttribute("class","prtMoneyBox"),nt.setAttribute("style","width:30px"),nt.setAttribute("value",commaSplit(m));z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(nt),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");j=document.createElement("input");j.setAttribute("name","price_"+row_count),j.setAttribute("id","price_"+row_count),j.setAttribute("type","text"),j.setAttribute("onchange","hesapla('price',"+row_count+")"),j.setAttribute("onClick","sellinputAllVal(this)"),j.setAttribute("class","prtMoneyBox"),j.setAttribute("style","width:30px"),j.setAttribute("value",commaSplit(N,2));z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(j),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");var at=document.createElement("input");at.setAttribute("name","indirim1_"+row_count),at.setAttribute("id","indirim1_"+row_count),at.setAttribute("value",commaSplit(l)),at.setAttribute("type","text"),at.setAttribute("onchange","getSetNum(this)&hesapla('price',"+row_count+")"),at.setAttribute("class","prtMoneyBox");z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(at),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:10%");var it=document.createElement("input");it.setAttribute("name","row_nettotal_"+row_count),it.setAttribute("id","row_nettotal_"+row_count),it.setAttribute("type","text"),it.setAttribute("class","prtMoneyBox"),it.setAttribute("value",commaSplit(0,2));z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(it),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:15%");G=document.createElement("input");G.setAttribute("name","product_name_other_"+row_count),G.setAttribute("id","product_name_other_"+row_count),G.setAttribute("type","text"),G.setAttribute("style","width:40px"),G.setAttribute("value",E);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:8%");G=document.createElement("input");G.setAttribute("name","detail_info_extra_"+row_count),G.setAttribute("id","detail_info_extra_"+row_count),G.setAttribute("type","text"),G.setAttribute("style","width:40px"),G.setAttribute("value",h);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);var ot=new Date;M=document.createElement("td");M.setAttribute("style","width:10%");G=document.createElement("input");G.setAttribute("name","deliver_date_"+row_count),G.setAttribute("id","deliver_date_"+row_count),G.setAttribute("type","date"),f.length>0?G.setAttribute("value",f):G.setAttribute("value",ot.toISOString().split("T")[0]);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","display:none"),M.setAttribute("class","hiddenR");var dt=document.createElement("input");dt.setAttribute("name","Tax_"+row_count),dt.setAttribute("id","Tax_"+row_count),dt.setAttribute("value",commaSplit(u));var ut=document.createElement("input");ut.setAttribute("name","converted_sid_"+row_count),ut.setAttribute("id","converted_sid_"+row_count),ut.setAttribute("value",P);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(dt),z.appendChild(ut),M.appendChild(z),L.appendChild(M);M=document.createElement("td"),z=document.createElement("div");z.setAttribute("class","form-group");var lt=document.createElement("input");lt.setAttribute("name","description_"+row_count),lt.setAttribute("id","description_"+row_count),lt.setAttribute("value",I),z.appendChild(lt),M.appendChild(z),L.appendChild(M),rowaListener(L);var ct=document.getElementById("tbl_basket");ct.appendChild(L),hesapla("other_money",rowCount),manuelControl(),RowControlForVirtual()}function AddRow_pbso(t,e,r,n,a,i,o,d,u,l,c=0,s="",_="TL",m,p="-6",A=0,v=0,b="Adet",E="",h="",y=0,w="",f="",C=0,g="",I="",T="",P=0){console.log(arguments);var S=$(document),O=S.find("input[name=_rd_money]:checked").val();document.getElementById("_hidden_rd_money_"+O).value;if("M"==b&&0==y){var x="&pid_="+t+"&sid_="+e+"&tax="+u+"&cost="+v+"&manuel="+A+"&product_name="+d+"&stock_code="+r+"&brand="+n+"&indirim1="+l+"&amount="+i+"&unit="+b+"&price="+o+"&other_money="+_+"&price_other="+m;return x+="&is_virtual="+a,x+="&product_type="+c,x+="&shelf_code="+s,x+="&rowNum="+row_count,openBoxDraggable("index.cfm?fuseaction=objects.emptypopup_extra_calculate_pbs"+x),!0}var B="SELECT PP.SHELF_CODE  FROM PRODUCT_PLACE_ROWS AS PPR";B+=" LEFT JOIN PRODUCT_PLACE AS PP ON PP.PRODUCT_PLACE_ID=PPR.PRODUCT_PLACE_ID",B+=" WHERE STOCK_ID="+e;var D="";if(0==s.length&&0!=e){var R=wrk_query(B,"dsn3");if(R.recordcount>0){if(R.recordcount>1&&0==y){x="&pid_="+t+"&sid_="+e+"&tax="+u+"&cost="+v+"&manuel="+A+"&product_name="+d+"&stock_code="+r+"&brand="+n+"&indirim1="+l+"&amount="+i+"&unit="+b+"&price="+o+"&other_money="+_+"&price_other="+m;return x+="&is_virtual="+a,x+="&product_type="+c,x+="&shelf_code="+s,x+="&rowNum="+row_count,openBoxDraggable("index.cfm?fuseaction=objects.emptypopup_select_raf_pbs"+x),!0}D=R.SHELF_CODE[0]}}else D=s;row_count++,rowCount=row_count;var k=moneyArr.find(t=>t.MONEY==_),N=m*k.RATE2;if(0==o){B="SELECT ISNULL(workcube_metosan_1.GET_CURRENT_PRODUCT_PRICE("+CompanyData.COMPANY_ID+","+CompanyData.PRICE_CAT+","+e+"),0) AS FIYAT",R=wrk_query(B,"dsn3");N=R.FIYAT[0],o=R.FIYAT[0],m=R.FIYAT[0],_="TL"}var L=document.createElement("tr");1==A&&L.setAttribute("style","background-color:#86b5ff75 !important;"),L.setAttribute("id","row_"+row_count),L.setAttribute("data-selected","0"),L.setAttribute("data-rc",row_count),L.setAttribute("data-ProductType",c),L.setAttribute("class","sepetRow");var M=document.createElement("td"),F=document.createElement("span");F.innerText=row_count,F.setAttribute("id","spn_"+row_count),M.appendChild(F);var H=document.createElement("span");1!=row_count?(H.setAttribute("class","fa fa-arrow-up"),H.setAttribute("onclick","moveRow("+row_count+","+(row_count-1)+")")):H.setAttribute("class",""),M.appendChild(H),L.appendChild(M);M=document.createElement("td");var U=document.createElement("input");U.setAttribute("type","checkbox"),U.setAttribute("data-row",row_count),U.setAttribute("onclick","selectrw(this)"),M.appendChild(U),L.appendChild(M);M=document.createElement("td");var Y=document.createElement("input");Y.setAttribute("name","product_id_"+row_count),Y.setAttribute("id","product_id_"+row_count),Y.setAttribute("type","hidden"),Y.setAttribute("value",t);var q=document.createElement("input");q.setAttribute("name","stock_id_"+row_count),q.setAttribute("id","stock_id_"+row_count),q.setAttribute("type","hidden"),q.setAttribute("value",e);var K=document.createElement("input");K.setAttribute("name","is_virtual_"+row_count),K.setAttribute("id","is_virtual_"+row_count),K.setAttribute("type","hidden"),K.setAttribute("value",a);var G=document.createElement("input");G.setAttribute("name","shelf_code_"+row_count),G.setAttribute("id","shelf_code_"+row_count),G.setAttribute("type","hidden"),G.setAttribute("value",D);var W=document.createElement("input");W.setAttribute("name","cost_"+row_count),W.setAttribute("id","cost_"+row_count),W.setAttribute("type","hidden"),W.setAttribute("value",v);var j=document.createElement("input");j.setAttribute("name","is_production_"+row_count),j.setAttribute("id","is_production_"+row_count),j.setAttribute("type","hidden"),j.setAttribute("value",C);var X=document.createElement("input");if(X.setAttribute("name","row_uniq_id_"+row_count),X.setAttribute("id","row_uniq_id_"+row_count),X.setAttribute("type","hidden"),g.length>0)X.setAttribute("value",g);else{var V=GenerateUniqueId();X.setAttribute("value",V)}var J=document.createElement("input");J.setAttribute("name","is_manuel_"+row_count),J.setAttribute("id","is_manuel_"+row_count),J.setAttribute("type","hidden"),J.setAttribute("value",A),M.appendChild(Y),M.appendChild(q),M.appendChild(K),M.appendChild(G),M.appendChild(W),M.appendChild(j),M.appendChild(X),M.appendChild(J);G=document.createElement("input");G.setAttribute("name","stock_code_"+row_count),G.setAttribute("id","stock_code_"+row_count),G.setAttribute("type","text"),G.setAttribute("readonly",""),G.setAttribute("style","width:40px"),G.setAttribute("class","stockkodu"),G.setAttribute("value",r);var z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:15%");G=document.createElement("input");G.setAttribute("name","product_name_"+row_count),G.setAttribute("id","product_name_"+row_count),G.setAttribute("class","urunadi"),G.setAttribute("type","text"),G.setAttribute("style","width:40px"),G.setAttribute("value",d);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");G=document.createElement("input");G.setAttribute("name","brand_name_"+row_count),G.setAttribute("id","brand_name_"+row_count),G.setAttribute("type","text"),G.setAttribute("disabled",""),G.setAttribute("value",n);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);var Q=T;M=document.createElement("td");M.setAttribute("style","width:5%");G=document.createElement("input");G.setAttribute("name","department_name"+row_count),G.setAttribute("id","department_name"+row_count),G.setAttribute("type","text"),G.setAttribute("disabled",""),G.setAttribute("value",Q);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","display:flex;align-items: baseline;");z=document.createElement("div");z.setAttribute("class","form-group");var Z=AsamaYapici(row_count,p),tt=document.createElement("span");tt.setAttribute("class","icon-detail"),tt.setAttribute("onclick","openBoxDraggable('index.cfm?fuseaction=objects.popup_detail_product&pid="+t+"&sid="+e+"')"),z.appendChild(Z),M.appendChild(z),1!=a&&M.appendChild(tt),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:3%");W=document.createElement("input");W.setAttribute("name","amount_"+row_count),W.setAttribute("id","amount_"+row_count),W.setAttribute("type","text"),W.setAttribute("class","prtMoneyBox"),W.setAttribute("value",commaSplit(i,2)),W.setAttribute("onchange","hesapla('price',"+row_count+")"),W.setAttribute("onClick","sellinputAllVal(this)");z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(W),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:3%");W=document.createElement("input");W.setAttribute("name","main_unit_"+row_count),W.setAttribute("id","main_unit_"+row_count),W.setAttribute("type","text"),W.setAttribute("style","width:20px"),W.setAttribute("readonly",""),W.setAttribute("value",b);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(W),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:3%");var et=document.createElement("select");et.setAttribute("name","other_money_"+row_count),et.setAttribute("id","other_money_"+row_count),et.setAttribute("onchange","hesapla('other_money',"+row_count+")");for(let t=0;t<moneyArr.length;t++){const e=moneyArr[t];var rt=document.createElement("option");rt.setAttribute("value",e.MONEY),rt.innerText=e.MONEY,et.appendChild(rt)}et.value=_;z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(et),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");var nt=document.createElement("input");nt.setAttribute("name","price_other_"+row_count),nt.setAttribute("id","price_other_"+row_count),nt.setAttribute("type","text"),nt.setAttribute("onchange","hesapla('price_other',"+row_count+")"),nt.setAttribute("class","prtMoneyBox"),nt.setAttribute("style","width:30px"),nt.setAttribute("value",commaSplit(m));z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(nt),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");j=document.createElement("input");j.setAttribute("name","price_"+row_count),j.setAttribute("id","price_"+row_count),j.setAttribute("type","text"),j.setAttribute("onchange","hesapla('price',"+row_count+")"),j.setAttribute("onClick","sellinputAllVal(this)"),j.setAttribute("class","prtMoneyBox"),j.setAttribute("style","width:30px"),j.setAttribute("value",commaSplit(N,2));z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(j),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:5%");var at=document.createElement("input");at.setAttribute("name","indirim1_"+row_count),at.setAttribute("id","indirim1_"+row_count),at.setAttribute("value",commaSplit(l)),at.setAttribute("type","text"),at.setAttribute("onchange","getSetNum(this)&hesapla('price',"+row_count+")"),at.setAttribute("class","prtMoneyBox");z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(at),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:10%");var it=document.createElement("input");it.setAttribute("name","row_nettotal_"+row_count),it.setAttribute("id","row_nettotal_"+row_count),it.setAttribute("type","text"),it.setAttribute("class","prtMoneyBox"),it.setAttribute("value",commaSplit(0,2));z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(it),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:15%");G=document.createElement("input");G.setAttribute("name","product_name_other_"+row_count),G.setAttribute("id","product_name_other_"+row_count),G.setAttribute("type","text"),G.setAttribute("style","width:40px"),G.setAttribute("value",E);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","width:8%");G=document.createElement("input");G.setAttribute("name","detail_info_extra_"+row_count),G.setAttribute("id","detail_info_extra_"+row_count),G.setAttribute("type","text"),G.setAttribute("style","width:40px"),G.setAttribute("value",h);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);var ot=new Date;M=document.createElement("td");M.setAttribute("style","width:10%");G=document.createElement("input");G.setAttribute("name","deliver_date_"+row_count),G.setAttribute("id","deliver_date_"+row_count),G.setAttribute("type","date"),f.length>0?G.setAttribute("value",f):G.setAttribute("value",ot.toISOString().split("T")[0]);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(G),M.appendChild(z),L.appendChild(M);M=document.createElement("td");M.setAttribute("style","display:none"),M.setAttribute("class","hiddenR");var dt=document.createElement("input");dt.setAttribute("name","Tax_"+row_count),dt.setAttribute("id","Tax_"+row_count),dt.setAttribute("value",commaSplit(u));var ut=document.createElement("input");ut.setAttribute("name","converted_sid_"+row_count),ut.setAttribute("id","converted_sid_"+row_count),ut.setAttribute("value",P);z=document.createElement("div");z.setAttribute("class","form-group"),z.appendChild(ut),z.appendChild(dt),M.appendChild(z),L.appendChild(M);M=document.createElement("td"),z=document.createElement("div");z.setAttribute("class","form-group");var lt=document.createElement("input");lt.setAttribute("name","description_"+row_count),lt.setAttribute("id","description_"+row_count),lt.setAttribute("value",I),z.appendChild(lt),M.appendChild(z),L.appendChild(M),rowaListener(L);var ct=document.getElementById("tbl_basket");ct.appendChild(L),hesapla("other_money",rowCount),manuelControl(),RowControlForVirtual(),FiyatTalepKontrol(rowCount)}function AsamaYapici(t,e){var r=document.createElement("select");r.setAttribute("name","orderrow_currency_"+t),r.setAttribute("id","orderrow_currency_"+t);var n=document.createElement("option");n.setAttribute("value",-5),n.innerText="Üretim",r.appendChild(n);n=document.createElement("option");n.setAttribute("value",-6),n.innerText="Sevk",r.appendChild(n);n=document.createElement("option");n.setAttribute("value",-2),n.innerText="Tedarik",r.appendChild(n);n=document.createElement("option");n.setAttribute("value",-1),n.innerText="Açık",r.appendChild(n);n=document.createElement("option");n.setAttribute("value",-10),n.innerText="Kapatıldı",r.appendChild(n);n=document.createElement("option");return n.setAttribute("value",1),n.innerText="Fiyat Talep",r.appendChild(n),r.value=e,r}function manuelControl(){var t=document.getElementsByClassName("sepetRow");for(let r=1;r<=t.length;r++){var e=document.getElementById("is_manuel_"+r).value;1==parseInt(e)&&$("#row_"+r).css("background","#86b5ff75"),hesapla("other_money",r)}}function UpdRow(t,e,r,n,a,i,o,d,u,l=-1,c="",s="Adet"){console.log("Basket PC Upd Row"),console.log(arguments),$("#product_id_"+u).val(t),$("#stock_id_"+u).val(e),$("#is_virtual_"+u).val(r),n>0&&$("#amount_"+u).val(n),a>0&&$("#price_"+u).val(a),$("#product_name_"+u).val(i),$("#Tax_"+u).val(o),d>0&&$("#indirim1_"+u).val(d),$("#orderrow_currency_"+u).val(l),$("#stock_code_"+u).val(c),$("#main_unit_"+u).val(s),hesapla("price",u),RowControlForVirtual()}function ShelfControl(t,e){var r="select DISTINCT SHELF_CODE,PPR.PRODUCT_PLACE_ID,PPR.PRODUCT_ID,PP.STORE_ID,PP.LOCATION_ID,PPR.PRODUCT_ID,SL.DEPARTMENT_LOCATION from "+generalParamsSatis.dataSources.dsn3+".PRODUCT_PLACE_ROWS AS PPR";r+=" LEFT JOIN "+generalParamsSatis.dataSources.dsn3+".PRODUCT_PLACE AS PP ON PP.PRODUCT_PLACE_ID=PPR.PRODUCT_PLACE_ID ",r+=" LEFT JOIN "+generalParamsSatis.dataSources.dsn+".STOCKS_LOCATION AS SL ON  SL.LOCATION_ID=PP.LOCATION_ID AND SL.DEPARTMENT_ID=PP.STORE_ID ",r+="WHERE PPR.PRODUCT_ID="+t+" AND SHELF_CODE='"+e+"'";var n=wrk_query(r,"dsn3");return 0!=n.recordcount||(0==generalParamsSatis.workingParams.IS_RAFSIZ?(alert("Ürün Bu Rafta Tanımlı Değildir Veya Raf Kodu Bulunamamıştır"),!1):(alert("Ürün Bu Rafta Tanımlı Değildir Veya Raf Kodu Bulunamamıştır Rafsız Kayıt Yapılacaktır"),!0))}function getRafSml(t,e){var r="SELECT PP.SHELF_CODE,SL.COMMENT,D.DEPARTMENT_HEAD,PP.LOCATION_ID,PP.STORE_ID FROM workcube_metosan_1.PRODUCT_PLACE_ROWS AS PPR ";r+=" LEFT JOIN workcube_metosan_1.PRODUCT_PLACE AS PP ON PPR.PRODUCT_PLACE_ID=PP.PRODUCT_PLACE_ID",r+=" LEFT JOIN workcube_metosan.STOCKS_LOCATION AS SL ON SL.LOCATION_ID=PP.LOCATION_ID AND SL.DEPARTMENT_ID=PP.STORE_ID",r+=" LEFT JOIN workcube_metosan.DEPARTMENT AS D ON D.DEPARTMENT_ID=SL.DEPARTMENT_ID",r+=" WHERE PPR.STOCK_ID="+t+" AND PP.SHELF_CODE='"+e+"'";var n=wrk_query(r);return n.recordcount>0?n.DEPARTMENT_HEAD[0]+" "+n.COMMENT[0]:""}function hesapla(t,e){var r=$("#price_"+e).val(),n=$("#price_other_"+e).val();r=-1!=r.indexOf(",")?filterNum(r,8):filterNum(commaSplit(r),8),n=-1!=n.indexOf(",")?filterNum(n,8):filterNum(commaSplit(n),8);var a=filterNum($("#amount_"+e).val(),8),i=$("#cost_"+e).val(),o=filterNum($("#indirim1_"+e).val(),8),d=$("#other_money_"+e).val(),u=filterNum($("#_txt_rate1_"+$("input[id^='_hidden_rd_money_'][value='"+d+"']").prop("id").split("_")[4]).val(),8),l=filterNum($("#_txt_rate2_"+$("input[id^='_hidden_rd_money_'][value='"+d+"']").prop("id").split("_")[4]).val(),8);$("#qs_basket tbody tr[data-rc='"+e+"']").css("background-color","white"),list_find("price,other_money",t)?n=r*u/l:"price_other"==t&&(r=n*l/u);var c=r*(100-o)/100*a;if(generalParamsSatis.workingParams.MALIYET_CONTROL)if(parseFloat(r*(100-o)/100)<parseFloat(i))document.getElementById("row_"+e).setAttribute("style","background-color:#ff06005c");else{var s=parseInt(document.getElementById("is_manuel_"+e).value);0==s&&document.getElementById("row_"+e).removeAttribute("style")}$("#price_other_"+e).val(commaSplit(n,2)),$("#price_"+e).val(commaSplit(r,2)),$("#row_nettotal_"+e).val(commaSplit(c,2)),$("#amount_"+e).val(commaSplit(a,2)),toplamHesapla(),toplamHesapla_2()}function toplamHesapla(){var t=0,e=0,r=0;for(let n=1;n<=rowCount;n++)if($("#price_"+n).val()){let a=filterNum($("#price_"+n).val(),8),i=(filterNum($("#price_other_"+n).val(),8),filterNum($("#amount_"+n).val(),8),filterNum($("#indirim1_"+n).val(),8),$("#Tax_"+n).val()),o=$("#other_money_"+n).val(),d=filterNum($("#row_nettotal_"+n).val(),8);filterNum($("#_txt_rate1_"+$("input[id^='_hidden_rd_money_'][value='"+o+"']").prop("id").split("_")[4]).val(),8),filterNum($("#_txt_rate2_"+$("input[id^='_hidden_rd_money_'][value='"+o+"']").prop("id").split("_")[4]).val(),8);parseFloat(a),t+=parseFloat(d),e+=parseFloat(d)*(parseInt(i)/100),r+=parseFloat(d)*(1+parseInt(i)/100)}$("#subTotal").val(commaSplit(t,2)),$("#subTaxTotal").val(commaSplit(e,2)),$("#subWTax").val(commaSplit(r,2))}function toplamHesapla_2(){var t=document.getElementsByClassName("sepetRow"),e=0,r=0,n=0,a=0;for(let m=1;m<=t.length;m++){var i=filterNum(document.getElementById("price_"+m).value),o=filterNum(document.getElementById("amount_"+m).value),d=filterNum(document.getElementById("indirim1_"+m).value),u=filterNum(document.getElementById("Tax_"+m).value),l=i*o,c=l*d/100,s=l-c,_=s*u/100;e+=s,r+=_,n+=c,a+=l}var m=parseFloat(filterNum($("#txt_disc").val()));$("#txt_disc").val(commaSplit(m,3));var p=e*generalParamsSatis.workingParams.MAX_DISCOINT/100;m>p&&(alert("Genel İndirim İşlem Tutarının %"+generalParamsSatis.workingParams.MAX_DISCOINT+"'ndan büyük Olmaz İndirim 0'lanacaktır"),$("#txt_disc").val(commaSplit(0,3)),m=0),$("#txt_total").val(commaSplit(a,3)),n+=m,$("#txt_disc_total").val(commaSplit(n,3)),e=a-n,$("#txt_nokdv_total").val(commaSplit(e,3)),r=18*e/100,$("#txt_kdv_total").val(commaSplit(r,3)),$("#txt_withkdv_total").val(commaSplit(e+r,3)),$("#basket_bottom_total").val(commaSplit(e+r,3))}function sellinputAllVal(t){t.select()}function GetBasketData(){var t=document.getElementsByClassName("sepetRow"),e=new Array;for(let g=1;g<=t.length;g++){
var r=document.getElementById("product_name_"+g).value,n=document.getElementById("product_id_"+g).value,a=document.getElementById("stock_id_"+g).value,i=document.getElementById("is_virtual_"+g).value,o=document.getElementById("amount_"+g).value,d=document.getElementById("price_"+g).value,u=document.getElementById("other_money_"+g).value,l=document.getElementById("row_nettotal_"+g).value,c=document.getElementById("converted_sid_"+g).value,s=document.getElementById("shelf_code_"+g).value,_=document.getElementById("Tax_"+g).value,m=document.getElementById("indirim1_"+g).value,p=document.getElementById("price_other_"+g).value,A=document.getElementById("orderrow_currency_"+g).value,v=document.getElementById("product_name_other_"+g).value,b=document.getElementById("detail_info_extra_"+g).value,E=document.getElementById("deliver_date_"+g).value,h=document.getElementById("is_production_"+g).value,y=document.getElementById("description_"+g).value,w=document.getElementById("row_uniq_id_"+g).value;if(!generalParamsSatis.workingParams.IS_ZERO_QUANTITY){var f=filterNum(d);if(f<=0)return alert("0 Fiyatlı Kayıt Yapamazsıznız"),!1}var C={product_name:r,product_id:n,stock_id:a,is_virtual:i,amount:o,price:d,other_money:u,row_nettotal:l,shelf_code:s,Tax:_,indirim1:m,price_other:p,orderrow_currency:A,product_name_other:v,detail_info_extra:b,deliver_date_bask:E,is_production:h,row_uniq_id:w,description:y,converted_sid:c};e.push(C)}var g=document.getElementById("company_id").value,I=document.getElementById("company_name").value,T=document.getElementById("PAYMETHOD").value,P=document.getElementById("PAYMETHOD_ID").value,S=document.getElementById("VADE").value,O=document.getElementById("company_partner_name").value,x=document.getElementById("company_partner_id").value,B=document.getElementById("process_stage").value,D=document.getElementById("SHIP_METHOD").value,R=document.getElementById("SHIP_METHOD_ID").value,k=document.getElementById("order_id").value,N=document.getElementById("subTotal").value,L=document.getElementById("subTaxTotal").value,M=document.getElementById("subWTax").value,F=document.getElementById("txt_total").value,H=document.getElementById("txt_disc").value,U=document.getElementById("txt_disc_total").value,Y=document.getElementById("txt_nokdv_total").value,q=document.getElementById("txt_kdv_total").value,K=document.getElementById("txt_withkdv_total").value,G=document.getElementById("offer_date").value,W=document.getElementById("offer_head").value,j=document.getElementById("ship_address").value,X=document.getElementById("ship_address_id").value,V=document.getElementById("city_id").value,J=document.getElementById("county_id").value,z=document.getElementById("offer_desc").value,Q=document.getElementById("PRICE_CATID").value;N=filterNum(N,4),L=filterNum(L,4),M=filterNum(M,4),F=filterNum(F,4),H=filterNum(H,4),U=filterNum(U,4),Y=filterNum(Y,4),q=filterNum(q,4),K=filterNum(K,4);var Z=$(document),tt=Z.find("input[name=_rd_money]:checked").val(),et="";$("#snl_teklif").is(":checked")&&(et+="1,"),$("#siparis").is(":checked")&&(et+="2,"),$("#sevkiyat").is(":checked")&&(et+="3,"),$("#sales_type_1").is(":checked")&&(et+="4,");var rt=document.getElementById("_hidden_rd_money_"+tt).value,nt=document.getElementById("_txt_rate1_"+tt).value,at=document.getElementById("_txt_rate2_"+tt).value,it=document.getElementById("plasiyer").value,ot=document.getElementById("plasiyer_id").value,dt=filterNum(nt,4),ut=filterNum(at,4),lt=getParameterByName("fuseaction"),ct={COMPANY_ID:g,PAYMETHOD:T,PAYMETHOD_ID:P,VADE:S,COMPANY_PARTNER_NAME:O,COMPANY_PARTNER_ID:x,MEMBER_NAME:I,PROCESS_STAGE:B,SHIP_METHOD:D,SHIP_METHOD_ID:R,ORDER_ID:k,OFFER_DATE:G,OFFER_HEAD:W,SHIP_ADDRESS:j,SHIP_ADDRESS_ID:X,CITY_ID:V,COUNTY_ID:J,ISLEM_TIPI_PBS:et,PRICE_CATID:Q,PLASIYER:it,PLASIYER_ID:ot,FACT:lt,OFFER_DESCRIPTION:z},st={SUBTOTAL:N,SUBTAXTOTAL:L,SUBNETTOTAL:M,BASKET_MONEY:rt,BASKET_RATE_1:dt,BASKET_RATE_2:ut,GROSS_TOTAL:F,AFTER_DISCOUNT:H,DISCOUNT_TOTAL:U,TOTAL_WITHOUT_KDV:Y,TAX_TOTAL:q,TOTAL_WITH_KDV:K},_t={OrderHeader:ct,OrderRows:e,OrderMoney:moneyArr,OrderFooter:st,WORKING_PARAMS:generalParamsSatis.workingParams};return _t}function KntO(){var t=0,e=document.getElementsByClassName("sepetRow"),r=document.getElementById("siparis"),n=$(r).is(":checked");for(let r=1;r<=e.length;r++){var a=$("#orderrow_currency_"+r).val();-5!=parseInt(a)&&-2!=parseInt(a)||n||(alert("Sipariş Seçili Olması Gerekmektedir"),t=!0),-1==parseInt(a)&&n&&(alert("Sipariş Yapmak İçin Açıkta Aşama Kalmış Olmaması Gerekmektedir "),t=!0),1==parseInt(a)&&n&&(alert("Fiyat Talep Aşamasında  Kalmış Olmaması Gerekmektedir "),t=!0)}return!t}function SaveOrder(){var t=GetBasketData();if(KntO()&&t){var e=document.createElement("form");e.target="Map",e.method="POST",e.action="/index.cfm?fuseaction=sales.emptypopup_query_save_order";var r=document.createElement("input");r.type="hidden",r.name="data",r.value=JSON.stringify(t),e.appendChild(r),document.body.appendChild(e),map=window.open("/index.cfm?fuseaction=sales.emptypopup_query_save_order","Map","status=0,title=0,height=600,width=800,scrollbars=1"),map?e.submit():alert("You must allow popups for this map to work.")}}function selectrw(t){if(rwwwx=t,$(rwwwx).is(":checked")){var e=rwwwx.getAttribute("data-row"),r=document.getElementById("row_"+e);r.setAttribute("style","background-color:#aaefff80"),r.setAttribute("data-selected",1)}else{e=rwwwx.getAttribute("data-row"),r=document.getElementById("row_"+e);r.setAttribute("style","background-color:#fff"),r.setAttribute("data-selected",0)}BasketSelControl()}function groupControl(){return!0}function BasketSelControl(){selectedArr.splice(0,selectedArr.length);var t={icon:"icn-md fa fa-cubes",txt:"Grupla",evntType:"onclick",evnt:"groupControl()",att:"disabled"},e={icon:"icn-md icon-remove",txt:"Seçili Olanları Sil",evntType:"onclick",evnt:"removeSelected(this)",att:""},r={icon:"icn-md fa fa-history",txt:"Güncelle",evntType:"onclick",evnt:"return true",att:"disabled"},n={icon:"icn-md fa fa-tree",txt:"Ağaç Görüntüle",evntType:"onclick",evnt:"showTree(this)",att:"disabled"},a={icon:"icn-md fa fa-recycle",txt:"Fiyat Detay",evntType:"onclick",evnt:"TurnOut(this)",att:"disabled"},i=[],o=document.getElementsByClassName("sepetRow");for(let t=0;t<o.length;t++){var d=o[t],u=d.getAttribute("data-selected");1==parseInt(u)&&selectedArr.push(d)}if(1==selectedArr.length){var l=selectedArr[0],c=l.getAttribute("data-rc"),s=l.getAttribute("data-producttype"),_=l.getAttribute("data-priceOffer"),m=$(l).find("#is_virtual_"+c).val(),p=$(l).find("#product_id_"+c).val();if(1==parseInt(m)){if(1==parseInt(s))r={icon:"icn-md fa fa-history",txt:"Güncelle",evntType:"onclick",evnt:"openHose("+p+","+c+")",att:""};else if(2==parseInt(s))r={icon:"icn-md fa fa-history",txt:"Güncelle",evntType:"onclick",evnt:"openHydrolic("+p+","+c+",1)",att:""};else if(4==parseInt(s))r={icon:"icn-md fa fa-history",txt:"Güncelle",evntType:"onclick",evnt:"openVirtualProduct("+p+","+c+")",att:""}}else n={icon:"icn-md fa fa-tree",txt:"Ağaç Görüntüle",evntType:"onclick",evnt:"showTree("+c+")",att:""};if(1==parseInt(_))a={icon:"icn-md fa fa-recycle",txt:"Fiyat Talep Sonuçları",evntType:"onclick",evnt:"TurnOut(this,"+c+")",att:""}}return i.push(e,r,t,n,a),i}function showTree(t){elks=t,console.log(t);var e=document.getElementById("stock_id_"+t).value;openBoxDraggable("index.cfm?fuseaction=objects.emptypopup_show_tree_prt&stock_id="+e)}function TurnOut(t,e){var r=document.getElementById("row_uniq_id_"+e).value;openBoxDraggable("index.cfm?fuseaction=sales.emptypopup_add_pbs_offer_price_offerings&OfferrowUniqId="+r+"&row_id="+e)}function rowaListener(t){$(t).on("contextmenu",function(t){$(".pbsContex").remove(),t.preventDefault();var e=document.createElement("div");e.setAttribute("class","pbsContex"),$(e).attr("style","display:none;top:"+t.clientY+"px;left:"+t.clientX+"px");var r=document.createElement("div");r.setAttribute("style","border-top: solid 5px black;border-left: solid 5px black;width: 10px;height: 10px;");var n=document.createElement("div");n.setAttribute("class","list-group");var a=BasketSelControl();for(let t=0;t<a.length;t++){var i=a[t],o=document.createElement("a"),d=document.createElement("span");d.setAttribute("class",i.icon),d.setAttribute("style","margin-right:10px");var u=document.createElement("span");u.innerText=i.txt,o.appendChild(d),o.appendChild(u),"disabled"==i.att&&o.setAttribute("disabled",""),o.setAttribute("class","list-group-item"),o.setAttribute(i.evntType,i.evnt),n.appendChild(o)}e.appendChild(r),e.appendChild(n),document.body.appendChild(e),$(e).show(500)})}function removeSelected(t){RemSelected(),$(t.parentElement.parentElement).remove()}function RemSelected(){for(let t=0;t<selectedArr.length;t++)$(selectedArr[t]).remove();selectedArr.splice(0,selectedArr.length),rowArrange(),toplamHesapla_2(),toplamHesapla()}function rowArrange(){var t=document.getElementsByClassName("sepetRow");for(let x=0;x<t.length;x++){var e=x+1,r=t[x],n=r.getAttribute("data-rc");r.setAttribute("id","row_"+e),r.setAttribute("data-selected","0"),r.setAttribute("data-rc",e);var a=document.getElementById("product_name_"+n),i=$(r).find("input:checkbox")[0];i.setAttribute("data-row",e),a.setAttribute("id","product_name_"+e),a.setAttribute("name","product_name_"+e);var o=document.getElementById("spn_"+n);o.innerText=e,o.setAttribute("id","spn_"+e);var d=document.getElementById("product_id_"+n);d.setAttribute("id","product_id_"+e),d.setAttribute("name","product_id_"+e);var u=document.getElementById("is_manuel_"+n);u.setAttribute("id","is_manuel_"+e),u.setAttribute("name","is_manuel_"+e);var l=document.getElementById("stock_id_"+n);l.setAttribute("id","stock_id_"+e),l.setAttribute("name","stock_id_"+e);var c=document.getElementById("is_production_"+n);c.setAttribute("id","is_production_"+e),c.setAttribute("name","is_production_"+e);var s=document.getElementById("is_virtual_"+n);s.setAttribute("id","is_virtual_"+e),s.setAttribute("name","is_virtual_"+e);var _=document.getElementById("row_uniq_id_"+n);_.setAttribute("id","row_uniq_id_"+e),_.setAttribute("name","row_uniq_id_"+e);var m=document.getElementById("cost_"+n);m.setAttribute("id","cost_"+e),m.setAttribute("name","cost_"+e);var p=document.getElementById("amount_"+n);p.setAttribute("id","amount_"+e),p.setAttribute("name","amount_"+e);var A=document.getElementById("price_"+n);A.setAttribute("id","price_"+e),A.setAttribute("name","price_"+e);var v=document.getElementById("stock_code_"+n);v.setAttribute("id","stock_code_"+e),v.setAttribute("name","stock_code_"+e);var b=document.getElementById("brand_name_"+n);b.setAttribute("id","brand_name_"+e),b.setAttribute("name","brand_name_"+e);var E=document.getElementById("main_unit_"+n);E.setAttribute("id","main_unit_"+e),E.setAttribute("name","main_unit_"+e);var h=document.getElementById("product_name_other_"+n);h.setAttribute("id","product_name_other_"+e),h.setAttribute("name","product_name_other_"+e);var y=document.getElementById("detail_info_extra_"+n);y.setAttribute("id","detail_info_extra_"+e),y.setAttribute("name","detail_info_extra_"+e);var w=document.getElementById("deliver_date_"+n);w.setAttribute("id","deliver_date_"+e),w.setAttribute("name","deliver_date_"+e);var f=document.getElementById("price_other_"+n);f.setAttribute("id","price_other_"+e),f.setAttribute("name","price_other_"+e);f=document.getElementById("other_money_"+n);f.setAttribute("id","other_money_"+e),f.setAttribute("name","other_money_"+e);var C=document.getElementById("row_nettotal_"+n);C.setAttribute("id","row_nettotal_"+e),C.setAttribute("name","row_nettotal_"+e);var g=document.getElementById("converted_sid_"+n);g.setAttribute("id","converted_sid_"+e),g.setAttribute("name","converted_sid_"+e);var I=document.getElementById("shelf_code_"+n);I.setAttribute("id","shelf_code_"+e),I.setAttribute("name","shelf_code_"+e);var T=document.getElementById("orderrow_currency_"+n);T.setAttribute("id","orderrow_currency_"+e),T.setAttribute("name","orderrow_currency_"+e);var P=document.getElementById("Tax_"+n);P.setAttribute("id","Tax_"+e),P.setAttribute("name","Tax_"+e);var S=document.getElementById("indirim1_"+n);S.setAttribute("id","indirim1_"+e),S.setAttribute("name","indirim1_"+e);var O=document.getElementById("description_"+n);O.setAttribute("id","description_"+e),O.setAttribute("name","description_"+e)}row_count=t.length,rowCount=t.length}function RowControlForVirtual(){var t=document.getElementsByClassName("sepetRow"),e=!1;for(let n=1;n<=t.length;n++){var r=document.getElementById("is_virtual_"+n);1==parseInt(r.value)&&(e=!0)}e?(document.getElementById("siparis").setAttribute("disabled","true"),document.getElementById("sevkiyat").setAttribute("disabled","true"),$(document.getElementById("snl_teklif")).click()):(document.getElementById("siparis").removeAttribute("disabled"),document.getElementById("sevkiyat").removeAttribute("disabled"))}function getProductMultiUse(t,e,r){function n(n){if(a=!1,window.XMLHttpRequest)try{a=new XMLHttpRequest}catch(t){a=!1}else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){a=!1}}if(a){function o(){4==a.readyState&&200==a.status&&(JSON.parse(a.responseText.replace(/\u200B/g,"")),i=JSON.parse(a.responseText.replace(/\u200B/g,"")))}a.open("post",n+"&xmlhttp=1",!1),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.setRequestHeader("pragma","nocache"),a.send("keyword="+t+"&userid="+generalParamsSatis.userData.user_id+"&dsn2="+generalParamsSatis.dataSources.dsn2+"&dsn1="+generalParamsSatis.dataSources.dsn1+"&dsn3="+generalParamsSatis.dataSources.dsn3+"&price_catid="+r+"&comp_id="+e),o()}}var a,i=new Object;return n("/AddOns/Partner/satis/cfc/hizli_satis.cfc?method=getProduct"),i}function getProductMultiUseA(t,e,r,n=0){function a(a){if(i=!1,window.XMLHttpRequest)try{i=new XMLHttpRequest}catch(t){i=!1}else if(window.ActiveXObject)try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){i=!1}}if(i){function d(){4==i.readyState&&200==i.status&&(JSON.parse(i.responseText.replace(/\u200B/g,"")),o=JSON.parse(i.responseText.replace(/\u200B/g,"")))}i.open("post",a+"&xmlhttp=1",!1),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.setRequestHeader("pragma","nocache"),i.send("keyword="+t+"&question_id="+n+"&userid="+generalParamsSatis.userData.user_id+"&dsn2="+generalParamsSatis.dataSources.dsn2+"&dsn1="+generalParamsSatis.dataSources.dsn1+"&dsn3="+generalParamsSatis.dataSources.dsn3+"&price_catid="+r+"&comp_id="+e+"&dsn="+generalParamsSatis.dataSources.dsn),d()}}var i,o=new Object;return a("/AddOns/Partner/satis/cfc/hizli_satis.cfc?method=getProductListpbs"),o}function openPriceListPartner(t,e,r,n){var a="";moneyArr.forEach(function(t,e){console.log(t.MONEY),a+=t.MONEY+"="+t.RATE2+"&"});var i="index.cfm?fuseaction=objects.emptypopup_price_history_partner&"+a+"sepet_process_type=-1&product_id="+t+"&stock_id="+e+"&pid="+t+"&product_name=&unit="+r+"&row_id=0&company_id="+n;openBoxDraggable(i)}function searchCode(t,e){var r=t.value;$(".stockkodu").filter(function(){$(this).parent().parent().parent().toggle($(this).val().toLowerCase().indexOf(r.toLowerCase())>-1)})}function searchName(t,e){var r=t.value;$(".urunadi").filter(function(){$(this).parent().parent().parent().toggle($(this).val().toLowerCase().indexOf(r.toLowerCase())>-1)})}function moveRow(t,e){if(1!=t){var r=$("#row_"+t).attr("data-producttype"),n=$("#row_"+e).attr("data-producttype"),a=$("#product_id_"+t).val(),i=$("#stock_id_"+t).val(),o=$("#is_virtual_"+t).val(),d=$("#shelf_code_"+t).val(),u=$("#cost_"+t).val(),l=$("#is_production_"+t).val(),c=$("#row_uniq_id_"+t).val(),s=$("#stock_code_"+t).val(),_=$("#product_name_"+t).val(),m=$("#brand_name_"+t).val(),p=$("#department_name"+t).val(),A=$("#amount_"+t).val(),v=$("#main_unit_"+t).val(),b=$("#other_money_"+t).val(),E=$("#price_other_"+t).val(),h=$("#price_"+t).val(),y=$("#indirim1_"+t).val(),w=$("#row_nettotal_"+t).val(),f=$("#detail_info_extra_"+t).val(),C=$("#deliver_date_"+t).val(),g=$("#Tax_"+t).val(),I=$("#orderrow_currency_"+t).val(),T=$("#description_"+t).val(),P=$("#product_name_other_"+t).val(),S=$("#product_id_"+e).val(),O=$("#stock_id_"+e).val(),x=$("#is_virtual_"+e).val(),B=$("#shelf_code_"+e).val(),D=$("#cost_"+e).val(),R=$("#is_production_"+e).val(),k=$("#row_uniq_id_"+e).val(),N=$("#stock_code_"+e).val(),L=$("#product_name_"+e).val(),M=$("#brand_name_"+e).val(),F=$("#department_name"+e).val(),H=$("#amount_"+e).val(),U=$("#main_unit_"+e).val(),Y=$("#other_money_"+e).val(),q=$("#price_other_"+e).val(),K=$("#price_"+e).val(),G=$("#indirim1_"+e).val(),W=$("#row_nettotal_"+e).val(),j=$("#detail_info_extra_"+e).val(),X=$("#deliver_date_"+e).val(),V=$("#Tax_"+e).val(),J=$("#orderrow_currency_"+e).val(),z=$("#description_"+e).val(),Q=$("#product_name_other_"+e).val();$("#product_id_"+e).val(a),$("#product_id_"+t).val(S),$("#stock_id_"+e).val(i),$("#stock_id_"+t).val(O),$("#is_virtual_"+e).val(o),$("#is_virtual_"+t).val(x),$("#shelf_code_"+e).val(d),$("#shelf_code_"+t).val(B),$("#cost_"+e).val(u),$("#cost_"+t).val(D),$("#is_production_"+e).val(l),$("#is_production_"+t).val(R),$("#row_uniq_id_"+e).val(c),$("#row_uniq_id_"+t).val(k),$("#stock_code_"+e).val(s),$("#stock_code_"+t).val(N),$("#product_name_"+e).val(_),$("#product_name_"+t).val(L),$("#brand_name_"+e).val(m),$("#brand_name_"+t).val(M),$("#department_name"+e).val(p),$("#department_name"+t).val(F),$("#amount_"+e).val(A),$("#amount_"+t).val(H),$("#main_unit_"+e).val(v),$("#main_unit_"+t).val(U),$("#other_money_"+e).val(b),$("#other_money_"+t).val(Y),$("#price_other_"+e).val(E),$("#price_other_"+t).val(q),$("#price_"+e).val(h),$("#price_"+t).val(K),$("#indirim1_"+e).val(y),$("#indirim1_"+t).val(G),$("#row_nettotal_"+e).val(w),$("#row_nettotal_"+t).val(W),$("#detail_info_extra_"+e).val(f),$("#detail_info_extra_"+t).val(j),$("#Tax_"+e).val(g),$("#Tax_"+t).val(V),$("#deliver_date_"+e).val(C),$("#deliver_date_"+t).val(X),$("#orderrow_currency_"+e).val(I),$("#orderrow_currency_"+t).val(J),$("#description_"+e).val(T),$("#description_"+t).val(z),$("#product_name_other_"+e).val(P),$("#product_name_other_"+t).val(Q),document.getElementById("row_"+e).setAttribute("data-producttype",r),document.getElementById("row_"+t).setAttribute("data-producttype",n),hesapla("price",t),hesapla("price",e)}}function GenerateUniqueId(){var t=new Date,e=t.toISOString().split("T")[0],r=t.toISOString().split("T")[1],n=e.replaceAll("-",""),a=r.replaceAll(":","");a=a.replaceAll(".",""),console.log(a);var i="PBS"+generalParamsSatis.userData.user_id+n+a;return i}function getSetNum(t){var e=t.value;0==e.length?t.value=commaSplit(0):t.value=commaSplit(e)}function CheckSatilabilir(){var t=new Array;for(let d=1;d<=row_count;d++){var e=document.getElementById("stock_id_"+d).value,r=document.getElementById("amount_"+d).value,n=parseFloat(filterNum(r)),a=document.getElementById("row_"+d),i=t.findIndex(t=>t.STOCK_ID==e);if(-1==i){var o=new Object;o.STOCK_ID=e,o.MIKTAR=n,t.push(o)}else t[i].MIKTAR+=n}for(let r=0;r<t.length;r++){var d=wrk_query("SELECT ISNULL("+generalParamsSatis.dataSources.dsn2+".GET_SATILABILIR_STOCK("+t[r].STOCK_ID+"),0) as SATILABILIR","dsn2"),u=parseFloat(d.SATILABILIR[0]);console.log(u);var l=!1;u<t[r].MIKTAR&&(l=!0);for(let n=1;n<=row_count;n++){e=document.getElementById("stock_id_"+n).value,a=document.getElementById("row_"+n);e==t[r].STOCK_ID&&(l?a.setAttribute("style","background:#ff5959"):a.removeAttribute("style"),console.log("miktar yokrow_"+n+"DD="+l))}}}function openPump(t){windowopen("index.cfm?fuseaction=product.emptypopup_virtual_main_partner&type=3&id="+t+"&company_id="+CompanyData.COMPANY_ID+"&PRICE_CATID="+CompanyData.PRICE_CAT,"wwide")}function FiyatTalepKontrol(t=0){if(0!=t){var e=$("#row_uniq_id_"+t).val(),r=$("#orderrow_currency_"+t).val();if(1==parseInt(r)){console.log(e);var n="SELECT * FROM PBS_OFFER_ROW_PRICE_OFFER WHERE UNIQUE_RELATION_ID='"+e+"'",a=wrk_query(n,"dsn3");if(1==parseInt(a.IS_ACCCEPTED[0])){var i=document.getElementById("row_"+t);i.setAttribute("style","background:#ffd70069"),i.setAttribute("data-priceOffer","1")}}}else for(let t=1;t<=row_count;t++){e=$("#row_uniq_id_"+t).val(),r=$("#orderrow_currency_"+t).val();if(1==parseInt(r)){console.log(e);n="SELECT * FROM PBS_OFFER_ROW_PRICE_OFFER WHERE UNIQUE_RELATION_ID='"+e+"'",a=wrk_query(n,"dsn3");if(1==parseInt(a.IS_ACCCEPTED[0])){i=document.getElementById("row_"+t);i.setAttribute("style","background:#ffd70069"),i.setAttribute("data-priceOffer","1")}console.log(a)}}}function setFiyatA(t,e,r,n){$("#price_"+t).val(e),$("#other_money_"+t).val(r),$("orderrow_currency_"+t).val(-6),hesapla("price",t),closeBoxDraggable(n)}var HataArr=[],row_count=0,rwww="",rwwwx="",rwwwxy="",selectedCount=0,rowCount=0,tempProductData="",selectedArr=[],CompanyData=new Object;$(document).ready(function(){setDoom(),"upd"==getParameterByName("event")&&CalisanKontrolPbs()});var elks="";