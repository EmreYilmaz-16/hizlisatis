function HataGoster(e,t,n){var o=document.createElement("div");o.setAttribute("style","  border: 1px solid;position: absolute;top: 50%;left: 50%;transform: translate(-50%, -50%);padding: 10px;);z-index:999999;font-size:22pt"),o.setAttribute("class","alert alert-"+t),$(o).html(e),document.body.appendChild(o),$(o).show(500),window.setTimeout(function(){$(o).remove()},n)}function openNoteBox(){$("#company_id_").val()&&openBoxDraggable("index.cfm?fuseaction=objects.ajax_extra_notes_list&style=1&design_id=1&is_special=0&action_type=0&is_delete=1&action_section=COMPANY_ID&action_id="+$("#company_id_").val()+"&is_open_det=1")}function openPayMethods(){if($("#company_id_").val()){let e="";$("#c_dueday_").val().length>0&&(e="&dueday="+$("#c_dueday_").val()),openBoxDraggable("index.cfm?fuseaction=objects.popup_extra_paymethods"+e,"PayMethodModal")}}function fillPayMethod(e,t,n,o,a){$("#paymethod_id_").val(t),$("#paymethod_").val("Ödeme Yöntemi: "+e),$("#dueday_").val(n),$("#paymethod_vehicle_").val(o),1==a&&$("#c_dueday_").val(n),closeBoxDraggable("PayMethodModal")}function GetAjaxQuery(type,type_id){var CompanyInfo=new Object,url="/index.cfm?fuseaction=objects.get_qs_info&ajax=1&ajax_box_page=1&isAjax=1",myAjaxConnector=GetAjaxConnector();if(myAjaxConnector&&(data="type_id="+type_id+"&q_type="+type,myAjaxConnector.open("post",url+"&xmlhttp=1",!1),myAjaxConnector.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT"),myAjaxConnector.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),myAjaxConnector.setRequestHeader("X-Requested-With","XMLHttpRequest"),myAjaxConnector.send(data),4==myAjaxConnector.readyState&&200==myAjaxConnector.status))try{CompanyInfo=eval(myAjaxConnector.responseText.replace(/\u200B/g,""))[0]}catch(e){CompanyInfo=!1}return CompanyInfo}function fillFields(){if(!list_find("37,38,39,40",window.event.keyCode)){$("#item-comp_info input[readonly]").val("");let e=$("#company_id_").val(),t=GetAjaxQuery("CompanyInfo",e);console.log("Buralarda Çalıştı"),console.log(comp_info),$("#city_name").val(t.CITY),$("#county_name").val(t.COUNTY),$("#tax_no").val(t.TAXNO),$("#phone").val(t.PHONE),$("#customer_value").val(t.CUSTOMER_VALUE),$("#plasiyer").val(t.PLASIYER),$("#plasiyer_id").val(t.PLASIYER_ID),fillPayMethod(t.PAYMETHOD,t.PAYMETHOD_ID,t.VADE,t.PAYMENT_VEHICLE,1),t.BAKIYE.toString().length>0&&$("#bakiye").val("Bakiye: "+commaSplit(t.BAKIYE)),t.BAKIYE<0?$("#bakiye").css("color","red"):$("#bakiye").css("color","green"),t.RISK.toString().length>0&&$("#risk").val("Risk: "+commaSplit(t.RISK)),t.RISK<0?$("#risk").css("color","red"):$("#risk").css("color","green"),$("#plasiyer").val(t.PLASIYER);let n="&comp_id="+e;$("#price_list option").remove(),t.PRICE_LISTS.forEach((e,t)=>{let o="";1==e.IS_DEFAULT&&(o="selected",n+="&price_catid="+e.PRICE_CATID);let a="<option value='"+e.PRICE_CATID+"' "+o+">"+e.PRICE_CAT+"</option>";$("#price_list").append(a)}),$("#product_list").html(""),t.PRICE_LISTS.length>0?loadProductList(n):alert("Kurumsal Üyeyi Bir Fiyat Listesine Dahil Ediniz!")}}function applyFilters(e){if(!list_find("37,38,39,40",window.event.keyCode)&&("13"==window.event.keyCode||e>0)&&$("#company_id_").val()&&$("#price_list").val()){$("#product_list").text("");"&keyword="+$("#keyword").val(),"&comp_id="+$("#company_id_").val()}}function nextPage(e){var t=filtreleriAl();AjaxPageLoad("index.cfm?fuseaction=product.emptypopup_list_pbs_product_ajax"+t+"&sayfa="+e,"product_list",1,"Yükleniyor"),currentProductPage=e}function beforePage(e){var t=filtreleriAl();AjaxPageLoad("index.cfm?fuseaction=product.emptypopup_list_pbs_product_ajax"+t+"&sayfa="+e,"product_list",1,"Yükleniyor"),currentProductPage=e}function filtreleriAl(){var e="",t=document.getElementById("keyword").value,n=document.getElementById("get_company_id").value,o=document.getElementById("get_comp_name").value,a=document.getElementById("product_cat").value,i=document.getElementById("search_product_catid").value,l=document.getElementById("brand_id").value,r=document.getElementById("brand_name").value,d=document.getElementById("PRICE_CATID").value,c=document.getElementById("PRICE_CAT").value,m=document.getElementById("company_name").value,_=document.getElementById("company_id").value,s=document.getElementById("miktar").value;return s=filterNum(s),t.length>0?e+="&Keyword="+t:e+="&Keyword=",n.length>0&&o.length>0?e+="&getCompId="+n:e+="&getCompId=",a.length>0&&i.length>0?e+="&hiearchy="+i:e+="&hiearchy=",r.length>0&&l.length>0?e+="&brand_id="+l:e+="&brand_id=",c.length>0&&d.length>0?e+="&price_catid="+d:e+="&price_catid=",m.length>0&&_.length>0?e+="&company_id="+_:e+="&company_id=",e+="&miktar="+s,e}function sayfaYukle(){var e=filtreleriAl(),t=0;AjaxPageLoad("index.cfm?fuseaction=product.emptypopup_list_pbs_product_ajax"+e+"&sayfa="+t,"product_list",1,"Yükleniyor")}function Filtrele(e,t){13!=t.keyCode&&"click"!=t.type||sayfaYukle()}function getCustomer(e,t){var n=t.value;(13==e.keyCode||t.value.length>=3)&&(ShowCustomerDiv(),AjaxPageLoad("index.cfm?fuseaction=objects.emptypopup_get_company_partner&keyword="+n,"cmpDiv",1,"Yükleniyor"))}function ShowCustomerDiv(){var e=document.getElementById("cmpDiv");$(e).show(500)}function HideCustomerDiv(){var e=document.getElementById("cmpDiv");$(e).hide(500)}function setCompany(e,t,n,o,a=1){let i=GetAjaxQuery("CompanyInfo",e);if(console.log(i.PRICE_LISTS.length),0==i.PRICE_LISTS.length)return alert("Kurumsal Üyeyi Bir Fiyat Listesine Dahil Ediniz"),!1;$("#company_id").val(e),$("#company_name").val(t),$("#cnamear").text(t),$("#company_partner_id").val(n),$("#company_partner_name").val(o),$("#PAYMETHOD").val(i.PAYMETHOD),$("#PAYMETHOD_ID").val(i.PAYMETHOD_ID),$("#SHIP_METHOD").val(i.SHIP_METHOD),$("#SHIP_METHOD_ID").val(i.SHIP_METHOD_ID),$("#VADE").val(i.VADE),$("#plasiyer").val(i.PLASIYER),$("#plasiyer_id").val(i.PLASIYER_ID),console.log(i),i.BAKIYE.toString().length>0&&$("#BAKIYE").val("BAKIYE: "+commaSplit(i.BAKIYE)),i.BAKIYE<0?$("#BAKIYE").css("color","red"):$("#BAKIYE").css("color","green"),i.RISK.toString().length>0&&$("#RISK").val("Risk: "+commaSplit(i.RISK)),i.RISK<0?$("#RISK").css("color","red"):$("#RISK").css("color","green");for(let e=0;e<i.PRICE_LISTS.length;e++)console.log(i.PRICE_LISTS[e]),1==i.PRICE_LISTS[e].IS_DEFAULT&&($("#PRICE_CATID").val(i.PRICE_LISTS[e].PRICE_CATID),$("#PRICE_CAT").val(i.PRICE_LISTS[e].PRICE_CAT),CompanyData.PRICE_CAT=i.PRICE_LISTS[e].PRICE_CATID);CompanyData.COMPANY_ID=e,CompanyData.NICK_NAME=t,HideCustomerDiv(),setAddress(e),1==a&&sayfaYukle(),i.NOTE_COUNT>0&&ShowMessage(e)}function GetAjaxQuery(type,type_id){var CompanyInfo=new Object,url="/index.cfm?fuseaction=objects.get_qs_info_partner&ajax=1&ajax_box_page=1&isAjax=1",myAjaxConnector=GetAjaxConnector();if(myAjaxConnector&&(data="type_id="+type_id+"&q_type="+type,myAjaxConnector.open("post",url+"&xmlhttp=1",!1),myAjaxConnector.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT"),myAjaxConnector.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=utf-8"),myAjaxConnector.setRequestHeader("X-Requested-With","XMLHttpRequest"),myAjaxConnector.send(data),4==myAjaxConnector.readyState&&200==myAjaxConnector.status))try{CompanyInfo=eval(myAjaxConnector.responseText.replace(/\u200B/g,""))[0]}catch(e){CompanyInfo=!1}return CompanyInfo}function emptyFunction(){return!0}function TabCntFunction(e,t,n,o,a,i){console.log("Emre"),console.log(arguments);n=$("#company_id").val();var l=$("#SHIP_METHOD_ID").val(),r=$("#PAYMETHOD").val(),d=!1;return n.length>0||(alert("Müşteri Seçmediniz"),d=!0),l.length>0||(alert("Sevk Yöntemi Seçmediniz"),d=!0),r.length>0||(alert("Ödeme Yöntemi Seçmediniz"),d=!0),!d}function add_adress(){return""!=hizliForm.company_id.value||""!=hizliForm.consumer_id.value?""!=hizliForm.company_id.value?(str_adrlink="&field_long_adres=hizliForm.ship_address&field_adress_id=hizliForm.ship_address_id",null!=hizliForm.city_id&&(str_adrlink+="&field_city=hizliForm.city_id"),null!=hizliForm.county_id&&(str_adrlink+="&field_county=hizliForm.county_id"),member_type_="partner",openBoxDraggable("index.cfm?fuseaction=objects.popup_list_member_address&is_comp=1&company_id="+hizliForm.company_id.value+"&member_name="+hizliForm.company_name.value+"&member_type="+member_type_+str_adrlink),!0):(str_adrlink="&field_long_adres=form_basket.ship_address&field_adress_id=form_basket.ship_address_id",null!=hizliForm.city_id&&(str_adrlink+="&field_city=form_basket.city_id"),null!=hizliForm.county_id&&(str_adrlink+="&field_county=form_basket.county_id"),member_type_="consumer",openBoxDraggable("index.cfm?fuseaction=objects.popup_list_member_address&is_comp=0&consumer_id="+hizliForm.consumer_id.value+"&member_name="+hizliForm.partner_name.value+"&member_type="+member_type_+str_adrlink),!0):(alert(" Cari Hesap Seçmelisiniz !"),!1)}function setAddress(e){var t=wrk_query("SELECT COMPANY_ADDRESS,CITY,COUNTY FROM COMPANY WHERE COMPANY_ID="+e,"dsn");console.log(t),document.getElementById("city_id").value=t.CITY[0],document.getElementById("county_id").value=t.COUNTY[0],document.getElementById("ship_address_id").value=-1,document.getElementById("ship_address").value=t.COMPANY_ADDRESS[0]}function pbs_DatetimeFormat(e){var t=new Date(e);console.log(t);var n=date_format(e);console.log(n);var o=t.getHours().toString();console.log(o);var a=t.getMinutes().toString();return console.log(a),1==o.length&&(o="0"+o),1==a.length&&(a="0"+a),n=n+" "+o+":"+a,n}function isChCntPbs(e){$(e).is(":checked")?($("#sales_type_m").show(),document.getElementById("siparis").checked=!0):($("#sales_type_m").hide(),document.getElementById("sales_type_1").checked=!1)}function snl_teklif_chek(e){$(e).is(":checked")||(e.checked=!0)}function siparis_check(e){$(e).is(":checked")||(document.getElementById("sevkiyat").checked=!1,document.getElementById("sales_type_1").checked=!1,$("#sales_type_m").hide())}function getParameterByName(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),o=n.exec(t);return o?o[2]?decodeURIComponent(o[2].replace(/\+/g," ")):"":null}function getSevkYontem(e){var t=wrk_query("SELECT  SHIP_METHOD_ID,SHIP_METHOD FROM SHIP_METHOD WHERE SHIP_METHOD LIKE '%"+e.value+"%' ");console.log(t);var n=document.getElementById("cmpDiv");$(n).html("");var o=document.createElement("table");for(let e=0;e<t.recordcount;e++){var a=document.createElement("tr"),i=document.createElement("td"),l=document.createElement("a");l.innerText=t.SHIP_METHOD[e],l.setAttribute("onclick","setSevkYontem("+t.SHIP_METHOD_ID[e]+",'"+t.SHIP_METHOD[e]+"')"),i.appendChild(l),a.appendChild(i),o.appendChild(a)}n=document.getElementById("cmpDiv");n.appendChild(o),$(n).show()}function setSevkYontem(e,t){var n=document.getElementById("cmpDiv");document.getElementById("SHIP_METHOD").value=t,document.getElementById("SHIP_METHOD_ID").value=e,$(n).hide()}function getOdemeYontem(e){var t=wrk_query("select PAYMETHOD,PAYMETHOD_ID,DUE_DAY from SETUP_PAYMETHOD WHERE PAYMETHOD LIKE '%"+e.value+"%' ","dsn");console.log(t);var n=document.getElementById("cmpDiv");$(n).html("");var o=document.createElement("table");for(let e=0;e<t.recordcount;e++){var a=document.createElement("tr"),i=document.createElement("td"),l=document.createElement("a");l.innerText=t.PAYMETHOD[e],l.setAttribute("onclick","setOdemeYontem("+t.PAYMETHOD_ID[e]+",'"+t.PAYMETHOD[e]+"',"+t.DUE_DAY[e]+")"),i.appendChild(l),a.appendChild(i),o.appendChild(a)}n=document.getElementById("cmpDiv");n.appendChild(o),$(n).show()}function setOdemeYontem(e,t,n){var o=document.getElementById("cmpDiv");document.getElementById("PAYMETHOD").value=t,document.getElementById("PAYMETHOD_ID").value=e,document.getElementById("VADE").value=n,$(o).hide()}function openPriceList(e,t,n,o,a,i,l,r,d,c,m,_,s,p,u,y,I,E,v,g,f){var h="&product_id="+t+"&stock_id="+n;$("#company_id_").val()&&(h+="&company_id="+$("#company_id_").val()),0==e?(h+="&tax="+o,h+="&cost="+a,h+="&manuel="+i,h+="&product_name="+l,h+="&stock_code="+r,h+="&brand="+d,h+="&indirim1="+c,h+="&basket_row_departman="+_,h+="&deliver_date="+s,h+="&amount="+p,h+="&unit="+u,h+="&price="+y,h+="&other_money="+I,h+="&price_other="+E,h+="&product_name_other="+v,h+="&detail_info_extra="+g,h+="&row_nettotal="+f):h+="&satir="+e,openBoxDraggable("index.cfm?fuseaction=objects.popup_extra_product_prices"+h)}function ShowMessage(e){openBoxDraggable("index.cfm?fuseaction=objects.emptypopup_show_company_notes&style=1&design_id=1&is_special=0&action_type=0&is_delete=1&action_section=COMPANY_ID&action_id="+e+"&is_open_det=1")}function openCariExtre(){var e=$("#company_id").val();e.length>0?windowopen("http://erp.metosan.com.tr/index.cfm?fuseaction=objects.popup_list_comp_extre&member_type=partner&member_id="+e):alert("Müşteri Seçmediniz")}function openAnaliz(e,t){var n=$("#company_id").val(),o=$("#company_name").val();if(n.length>0){var a="http://erp.metosan.com.tr/index.cfm?fuseaction=report.sale_analyse_report&company_id="+n+"&company="+o+"&date1="+e+"&date2="+t+"&form_submitted=1&process_type_select=235&process_type_=235,42,222,43,30,32,179,199,120,123,190,191,236,122,223,200,121,193,240,216,201,189,34,204,38,203,198,33,225,35,192,237,229,224,194,127,205,176,206,36,207,29,209,31";windowopen(a,"list")}else alert("Müşteri Seçmediniz")}var currentProductPage=0;