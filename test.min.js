function process_cat_dsp_function(){var e=document.getElementById("process_stage"),t=e.value;SayfaSekillendir(t,AktifKullaniciId)}function MaliyetKontroluYap(){var e=document.getElementsByTagName("tr"),t=!1;for(let u=0;u<e.length;u++){var a=e[u];if(a.hasAttribute("basketitem")){var r=$(a).find("input[name='product_id']").val();if(r){SatirRenklendir(a,-1);var n=$(a).find("input[name='price_other']").val(),i=$(a).find("select[name='other_money']").val(),l=SorguGetir(1,r),o=wrk_query(l);if(console.log(o),o.recordcount>0){var _=MaliyetObjesiOlustur(o.PURCHASE_NET_LOCATION_ALL[0],o.PURCHASE_NET_MONEY_LOCATION[0]),s=MaliyetObjesiOlustur(o.PURCHASE_NET_SYSTEM_2_LOCATION_ALL[0],o.PURCHASE_NET_SYSTEM_MONEY_2_LOCATION[0]),S=MaliyetObjesiOlustur(o.PURCHASE_NET_SYSTEM_LOCATION_ALL[0],o.PURCHASE_NET_SYSTEM_MONEY_LOCATION[0]),c=0;i==_.ParaBirimi?c=_.Maliyet:i==s.ParaBirimi?c=s.Maliyet:i==S.ParaBirimi&&(c=S.Maliyet),n=parseFloat(filterNum(n)),n<c&&(t=!0,SatirRenklendir(a,1))}else t=!0,SatirRenklendir(a,2)}}}return!!t&&(alert("Maliyetin Altında(Turuncu) veya Maliyet Tanımlanmamış(Mavi) Ürünler Var Sepeti İnceleyiniz"),!0)}function SevkButonunuEkle(e){var t=document.getElementsByClassName("detailHeadButton");$(t[0].children).prepend("<li class='dropdown' id='transformation'><a style='color:#fcba03' title='Sevkiyat Planı Oluştur'onclick='pencereac(1,"+e+")'><i class='icon-bell'></i></a></li>")}function SorguGetir(e){var t="";return 1==e&&(t="SELECT PURCHASE_NET_MONEY AS PURCHASE_NET_MONEY_LOCATION,PURCHASE_NET\tAS PURCHASE_NET_LOCATION_ALL,PURCHASE_NET_SYSTEM AS PURCHASE_NET_SYSTEM_LOCATION_ALL,PURCHASE_NET_SYSTEM_MONEY AS PURCHASE_NET_SYSTEM_MONEY_LOCATION,PURCHASE_NET_SYSTEM_2 AS PURCHASE_NET_SYSTEM_2_LOCATION_ALL,PURCHASE_NET_SYSTEM_MONEY_2 AS PURCHASE_NET_SYSTEM_MONEY_2_LOCATION,PRODUCT_COST_ID",t+=" FROM catalystTest_1.PRODUCT_COST WHERE PRODUCT_COST_ID=(SELECT MAX(PRODUCT_COST_ID) from catalystTest_1.PRODUCT_COST where PRODUCT_ID="+arguments[1]+")"),t}function MaliyetObjesiOlustur(e,t){var a={Maliyet:e,ParaBirimi:t};return a}function SatirRenklendir(e,t){var a="Orange";1==t?a="Red":1==t?a="aqua":-1==t&&(a="none"),e.setAttribute("style","color:white !important;background-color:"+a+" !important")}function SurecleriDegistir(e,t){$("#process_stage").find("option").remove().end(),$("#process_stage").html("<option value='"+e+"'>"+t+"</option>")}function satirdis(){$("input[name='Price']").attr("readonly",!0),$("input[name='other_money_value']").attr("readonly",!0),$("input[name='price_other']").attr("readonly",!0),$("input[name='row_lasttotal']").attr("readonly",!0),$("input[name='tax_price']").attr("readonly",!0),$("input[name='row_total']").attr("readonly",!0);var e=$(".fa-ellipsis-v");for(let a=0;a<e.length;a++){var t=e[a];"product_popup"==t.parentElement.id?console.log(t.parentElement.id):t.parentElement.remove()}var a=$("select[name='other_money']");for(let e=0;e<a.length;e++){var r=a[e],n=$(r).find("option");for(let e=0;e<n.length;e++){var i=n[e],l=$(i).attr("selected");"selected"==l?console.log(l):i.remove()}}}function SayfaSekillendir(e,t){var a=MaliyetKontroluYap();if(a){SurecleriDegistir(137,"Sipariş Onay Talep"),console.log("Yetkili Kontrolü");YetKiliPersoneller.findIndex(e=>e==t)}else if(1==DpParams.ProcessStageAutoInc){var r=DpParams.ProcessStageAutoIncIds.findIndex(t=>t==e);r>=0&&r!=DpParams.ProcessStageAutoIncIds.length-1&&SurecleriDegistir(DpParams.ProcessStageAutoIncIds[r],DpParams.ProcessStageAutoIncDescr[r])}}var YetKiliPersoneller=[2,3,4,999],DpParams={ProcessStageAutoInc:!0,ProcessStageAutoIncIds:[137,138,47,115],ProcessStageAutoIncDescr:["Sipariş Hazırlanıyor","Sipariş Onay Talep","Sevkiyat Planı Yapılacak","Planlama Yapıldı"]};process_cat_dsp_function();